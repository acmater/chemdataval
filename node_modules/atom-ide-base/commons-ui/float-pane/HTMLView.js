"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getDocumentationHtml = exports.HTMLView = void 0;
const dompurify_1 = __importDefault(require("dompurify"));
class HTMLView {
    constructor({ html, containerClassName, contentClassName, }) {
        this.rootElement = document.createElement("div");
        this.rootElement.className = containerClassName;
        this.rootElement.addEventListener("wheel", this.onMouseWheel, {
            passive: true,
        });
        if (html) {
            const innerHTML = dompurify_1.default.sanitize(html);
            this.rootElement.innerHTML = `
        <div className='${contentClassName}'>${innerHTML}</div>`;
        }
    }
    destroy() {
        this.rootElement.removeEventListener("wheel", this.onMouseWheel);
    }
    get element() {
        return this.rootElement;
    }
    onMouseWheel(evt) {
        evt.stopPropagation();
    }
}
exports.HTMLView = HTMLView;
async function getDocumentationHtml(markdownTexts, grammarName, renderer) {
    if (markdownTexts !== undefined && markdownTexts.length > 0) {
        const markdownText = markdownTexts.join("\r\n");
        return renderer.render(markdownText, grammarName);
    }
    return null;
}
exports.getDocumentationHtml = getDocumentationHtml;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSFRNTFZpZXcuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMtY29tbW9ucy11aS9mbG9hdC1wYW5lL0hUTUxWaWV3LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUdBLDBEQUFpQztBQU1qQyxNQUFhLFFBQVE7SUFPbkIsWUFBWSxFQUNWLElBQUksRUFDSixrQkFBa0IsRUFDbEIsZ0JBQWdCLEdBS2pCO1FBQ0MsSUFBSSxDQUFDLFdBQVcsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFBO1FBQ2hELElBQUksQ0FBQyxXQUFXLENBQUMsU0FBUyxHQUFHLGtCQUFrQixDQUFBO1FBQy9DLElBQUksQ0FBQyxXQUFXLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxZQUFZLEVBQUU7WUFDNUQsT0FBTyxFQUFFLElBQUk7U0FDZCxDQUFDLENBQUE7UUFDRixJQUFJLElBQUksRUFBRTtZQUNSLE1BQU0sU0FBUyxHQUFHLG1CQUFTLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFBO1lBQzFDLElBQUksQ0FBQyxXQUFXLENBQUMsU0FBUyxHQUFHOzBCQUNULGdCQUFnQixLQUFLLFNBQVMsUUFBUSxDQUFBO1NBQzNEO0lBQ0gsQ0FBQztJQUtELE9BQU87UUFDTCxJQUFJLENBQUMsV0FBVyxDQUFDLG1CQUFtQixDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUE7SUFDbEUsQ0FBQztJQU1ELElBQUksT0FBTztRQUNULE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQTtJQUN6QixDQUFDO0lBTUQsWUFBWSxDQUFDLEdBQWU7UUFDMUIsR0FBRyxDQUFDLGVBQWUsRUFBRSxDQUFBO0lBQ3ZCLENBQUM7Q0FDRjtBQWxERCw0QkFrREM7QUFTTSxLQUFLLFVBQVUsb0JBQW9CLENBQ3hDLGFBQTRCLEVBQzVCLFdBQW1CLEVBQ25CLFFBQXlCO0lBRXpCLElBQUksYUFBYSxLQUFLLFNBQVMsSUFBSSxhQUFhLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtRQUMzRCxNQUFNLFlBQVksR0FBRyxhQUFhLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFBO1FBQy9DLE9BQU8sUUFBUSxDQUFDLE1BQU0sQ0FBQyxZQUFZLEVBQUUsV0FBVyxDQUFDLENBQUE7S0FDbEQ7SUFDRCxPQUFPLElBQUksQ0FBQTtBQUNiLENBQUM7QUFWRCxvREFVQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBhIHJlZmVyZW5jZSB0byB0aGUgRE9NcHVyaWZ5IGZ1bmN0aW9uIHRvIG1ha2Ugc2FmZSBIVE1MIHN0cmluZ3NcclxuICovXHJcbmltcG9ydCBET01QdXJpZnkgZnJvbSBcImRvbXB1cmlmeVwiXHJcbmltcG9ydCB7IE1hcmtkb3duU2VydmljZSB9IGZyb20gXCIuLi8uLi90eXBlcy1wYWNrYWdlcy9tYWluXCJcclxuXHJcbi8qKlxyXG4gKiBhbiBldGNoIGNvbXBvbmVudCB0aGF0IGNhbiBob3N0IGFscmVhZHkgcHJlcGFyZWQgSFRNTCB0ZXh0XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgSFRNTFZpZXcge1xyXG4gIHJvb3RFbGVtZW50OiBIVE1MRWxlbWVudFxyXG5cclxuICAvKipcclxuICAgKiBjcmVhdGVzIHRoZSBIVE1MIHZpZXcgY29tcG9uZW50IGFuZCBoYW5kcyBvdmVyIHRoZSBIVE1MIHRvIGVtYmVkZFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBodG1sIHRoZSBIVE1MIHN0cmluZyB0byBlbWJlZGQgaW50byB0aGUgSFRNTCB2aWV3IGNvbXBvbmVudFxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHtcclxuICAgIGh0bWwsXHJcbiAgICBjb250YWluZXJDbGFzc05hbWUsXHJcbiAgICBjb250ZW50Q2xhc3NOYW1lLFxyXG4gIH06IHtcclxuICAgIGh0bWw6IHN0cmluZ1xyXG4gICAgY29udGFpbmVyQ2xhc3NOYW1lOiBzdHJpbmdcclxuICAgIGNvbnRlbnRDbGFzc05hbWU6IHN0cmluZ1xyXG4gIH0pIHtcclxuICAgIHRoaXMucm9vdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXHJcbiAgICB0aGlzLnJvb3RFbGVtZW50LmNsYXNzTmFtZSA9IGNvbnRhaW5lckNsYXNzTmFtZVxyXG4gICAgdGhpcy5yb290RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgdGhpcy5vbk1vdXNlV2hlZWwsIHtcclxuICAgICAgcGFzc2l2ZTogdHJ1ZSxcclxuICAgIH0pXHJcbiAgICBpZiAoaHRtbCkge1xyXG4gICAgICBjb25zdCBpbm5lckhUTUwgPSBET01QdXJpZnkuc2FuaXRpemUoaHRtbClcclxuICAgICAgdGhpcy5yb290RWxlbWVudC5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9JyR7Y29udGVudENsYXNzTmFtZX0nPiR7aW5uZXJIVE1MfTwvZGl2PmBcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIGNsZWFudXAgdGhlIEhUTUwgdmlldyBjb21wb25lbnRcclxuICAgKi9cclxuICBkZXN0cm95KCkge1xyXG4gICAgdGhpcy5yb290RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgdGhpcy5vbk1vdXNlV2hlZWwpXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiByZXR1cm5zIHRoZSByb290IGVsZW1lbnQgb2YgdGhlIEhUTUwgdmlldyBjb21wb25lbnRcclxuICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gdGhlIHJvb3QgZWxlbWVudCB3cmFwcGluZyB0aGUgSFRNTCBjb250ZW50XHJcbiAgICovXHJcbiAgZ2V0IGVsZW1lbnQoKTogSFRNTEVsZW1lbnQge1xyXG4gICAgcmV0dXJuIHRoaXMucm9vdEVsZW1lbnRcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIGhhbmRsZXMgdGhlIG1vdXNlIHdoZWVsIGV2ZW50IHRvIGVuYWJsZSBzY3JvbGxpbmcgb3ZlciBsb25nIHRleHRcclxuICAgKiBAcGFyYW0gIHtXaGVlbEV2ZW50fSBldnQgdGhlIG1vdXNlIHdoZWVsIGV2ZW50IGJlaW5nIHRyaWdnZXJlZFxyXG4gICAqL1xyXG4gIG9uTW91c2VXaGVlbChldnQ6IFdoZWVsRXZlbnQpIHtcclxuICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKVxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIGNvbnZlcnQgdGhlIG1hcmtkb3duIGRvY3VtZW50YXRpb24gdG8gSFRNTFxyXG4gKiBAcGFyYW0gbWFya2Rvd25UZXh0cyB0aGUgZG9jdW1lbnRhdGlvbiB0ZXh0IGluIG1hcmtkb3duIGZvcm1hdCB0byBiZSBjb252ZXJ0ZWRcclxuICogQHBhcmFtIGdyYW1tYXJOYW1lICB0aGUgZGVmYXVsdCBncmFtbWFyIHVzZWQgZm9yIGVtYmVkZGVkIGNvZGUgc2FtcGxlc1xyXG4gKiBAcGFyYW0gcmVuZGVyZXIgbWFya2Rvd24gc2VydmljZSB0byBiZSB1c2VkIGZvciByZW5kZXJpbmdcclxuICogQHJldHVybiBhIHByb21pc2Ugb2JqZWN0IHRvIHRyYWNrIHRoZSBhc3luY2hyb25vdXMgb3BlcmF0aW9uXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RG9jdW1lbnRhdGlvbkh0bWwoXHJcbiAgbWFya2Rvd25UZXh0czogQXJyYXk8U3RyaW5nPixcclxuICBncmFtbWFyTmFtZTogc3RyaW5nLFxyXG4gIHJlbmRlcmVyOiBNYXJrZG93blNlcnZpY2VcclxuKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XHJcbiAgaWYgKG1hcmtkb3duVGV4dHMgIT09IHVuZGVmaW5lZCAmJiBtYXJrZG93blRleHRzLmxlbmd0aCA+IDApIHtcclxuICAgIGNvbnN0IG1hcmtkb3duVGV4dCA9IG1hcmtkb3duVGV4dHMuam9pbihcIlxcclxcblwiKVxyXG4gICAgcmV0dXJuIHJlbmRlcmVyLnJlbmRlcihtYXJrZG93blRleHQsIGdyYW1tYXJOYW1lKVxyXG4gIH1cclxuICByZXR1cm4gbnVsbFxyXG59XHJcbiJdfQ==